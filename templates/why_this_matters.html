{% extends "base.html" %}

{% block title %}Why This Matters - Schema Explorer{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <div>
            <h1><i class="fas fa-lightbulb"></i> Why This Matters</h1>
            <p class="subtitle">Understanding the power of database-driven CAD management</p>
        </div>
    </div>

    <!-- Hero Statement -->
    <div class="card" style="background: linear-gradient(135deg, rgba(0,255,255,0.15) 0%, rgba(0,100,255,0.1) 100%); border: 2px solid var(--accent-cyan); margin-bottom: 30px;">
        <div class="card-body" style="padding: 40px; text-align: center;">
            <h2 style="color: var(--accent-cyan); font-size: 28px; margin: 0 0 20px 0;">
                <i class="fas fa-rocket"></i> Beyond File Storage: CAD Data as Queryable Intelligence
            </h2>
            <p style="font-size: 18px; line-height: 1.8; color: var(--text-primary); max-width: 900px; margin: 0 auto;">
                Traditional CAD workflows treat drawings as static files locked in proprietary formats. 
                This system transforms CAD data into <strong style="color: var(--accent-cyan);">structured, queryable, geospatially-enabled database records</strong> 
                while maintaining complete round-trip fidelity to industry-standard DXF/DWG formats.
            </p>
        </div>
    </div>

    <!-- Main Comparison -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 40px;">
        <!-- Traditional Approach -->
        <div class="card" style="border: 2px solid rgba(220, 53, 69, 0.5);">
            <div class="card-header" style="background: linear-gradient(135deg, rgba(220, 53, 69, 0.2) 0%, rgba(220, 53, 69, 0.1) 100%);">
                <h2 style="color: #ff6b6b;">
                    <i class="fas fa-folder-open"></i> Traditional Approach
                </h2>
                <p style="margin: 10px 0 0 0; color: var(--text-dim); font-size: 14px;">File-based CAD storage</p>
            </div>
            <div class="card-body">
                <div class="comparison-section">
                    <h3><i class="fas fa-database"></i> Data Storage</h3>
                    <ul class="comparison-list negative">
                        <li>DXF/DWG files stored in network folders</li>
                        <li>Data locked inside proprietary binary formats</li>
                        <li>No structured database relationships</li>
                        <li>File naming conventions as only organization</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-search"></i> Querying & Analysis</h3>
                    <ul class="comparison-list negative">
                        <li>Must open each file individually in CAD software</li>
                        <li>No SQL queries across multiple drawings</li>
                        <li>Manual searching through layers and entities</li>
                        <li>Impossible to ask: "Find all doors in Building A"</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-ruler-combined"></i> Standards Compliance</h3>
                    <ul class="comparison-list negative">
                        <li>Manual layer/color checking by reviewers</li>
                        <li>Standards documented in PDF reference manuals</li>
                        <li>Human error in applying standards</li>
                        <li>Inconsistencies across project teams</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-map-marked-alt"></i> GIS Integration</h3>
                    <ul class="comparison-list negative">
                        <li>Separate export process to convert CAD → GIS</li>
                        <li>Data duplication and version conflicts</li>
                        <li>No spatial queries on CAD geometry</li>
                        <li>Manual coordinate system transformations</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-history"></i> Versioning & Collaboration</h3>
                    <ul class="comparison-list negative">
                        <li>File locking prevents simultaneous editing</li>
                        <li>Email attachments and "final_final_v3.dwg"</li>
                        <li>No audit trail of changes</li>
                        <li>Difficult to merge work from multiple drafters</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-chart-line"></i> Analytics & Reporting</h3>
                    <ul class="comparison-list negative">
                        <li>No insight into drawing content without opening files</li>
                        <li>Cannot generate reports: "How many layers are used?"</li>
                        <li>Manual counting and Excel spreadsheets</li>
                        <li>Impossible to track standards adoption trends</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Modern Database Approach -->
        <div class="card" style="border: 2px solid rgba(0, 255, 255, 0.5);">
            <div class="card-header" style="background: linear-gradient(135deg, rgba(0, 255, 255, 0.2) 0%, rgba(0, 255, 255, 0.1) 100%);">
                <h2 style="color: var(--accent-cyan);">
                    <i class="fas fa-database"></i> Database-Driven Approach
                </h2>
                <p style="margin: 10px 0 0 0; color: var(--text-dim); font-size: 14px;">PostGIS + Normalized Database</p>
            </div>
            <div class="card-body">
                <div class="comparison-section">
                    <h3><i class="fas fa-database"></i> Data Storage</h3>
                    <ul class="comparison-list positive">
                        <li>Every line, circle, text note stored as PostGIS geometry</li>
                        <li>Normalized foreign key relationships (layers → standards)</li>
                        <li>3D spatial indexing for fast queries (GIST indexes)</li>
                        <li>Complete round-trip: DXF → Database → DXF with zero data loss</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-search"></i> Querying & Analysis</h3>
                    <ul class="comparison-list positive">
                        <li>SQL queries: <code>SELECT * FROM drawing_entities WHERE entity_type='CIRCLE' AND ST_Area(geometry) > 100</code></li>
                        <li>Search across all drawings instantly</li>
                        <li>Spatial queries: "Find all text within 10 feet of this line"</li>
                        <li>Cross-project analysis: "Which drawings use layer X?"</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-ruler-combined"></i> Standards Compliance</h3>
                    <ul class="comparison-list positive">
                        <li>Automated validation against layer_standards table</li>
                        <li>DXFLookupService enforces standards at import</li>
                        <li>Real-time alerts: "Layer WALLS doesn't match company standard"</li>
                        <li>Standards portal provides human-friendly reference</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-map-marked-alt"></i> GIS Integration</h3>
                    <ul class="comparison-list positive">
                        <li>CAD geometry IS GIS geometry (PostGIS native format)</li>
                        <li>Single source of truth - no duplicate datasets</li>
                        <li>Overlay analysis: CAD drawings + parcels + aerial imagery</li>
                        <li>Coordinate transformations via PostGIS ST_Transform()</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-history"></i> Versioning & Collaboration</h3>
                    <ul class="comparison-list positive">
                        <li>Database transactions enable safe concurrent editing</li>
                        <li>Complete audit trail via export_jobs and timestamps</li>
                        <li>Rollback to any checkpoint (automatic snapshots)</li>
                        <li>Entity-level locking instead of file-level locking</li>
                    </ul>
                </div>

                <div class="comparison-section">
                    <h3><i class="fas fa-chart-line"></i> Analytics & Reporting</h3>
                    <ul class="comparison-list positive">
                        <li>Dashboard shows drawing stats without opening files</li>
                        <li>Reports: "Top 10 most-used layers across all projects"</li>
                        <li>Layer usage tracking (which layers have content?)</li>
                        <li>Standards adoption metrics and trend analysis</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Key Capabilities Highlight -->
    <div class="card">
        <div class="card-header">
            <h2><i class="fas fa-star"></i> What Makes This System Special</h2>
        </div>
        <div class="card-body">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="capability-card">
                    <div class="capability-icon" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <h3>Complete Round-Trip Fidelity</h3>
                    <p>Import DXF → Database → Export DXF with zero data loss. Every entity, layer, dimension, and hatch preserved exactly.</p>
                </div>

                <div class="capability-card">
                    <div class="capability-icon" style="background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3>Native GIS + CAD Fusion</h3>
                    <p>PostGIS GeometryZ stores 3D CAD primitives in same format as GIS data. Spatial indexing enables sub-second queries.</p>
                </div>

                <div class="capability-card">
                    <div class="capability-icon" style="background: linear-gradient(135deg, #ffd700 0%, #f59f00 100%);">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Enforced Standards</h3>
                    <p>Normalized FK structure (layer_id → layer_standards) validates compliance automatically. Standards portal educates users.</p>
                </div>

                <div class="capability-card">
                    <div class="capability-icon" style="background: linear-gradient(135deg, #00ffff 0%, #00bcd4 100%);">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>SQL Query Power</h3>
                    <p>Ask complex questions across thousands of drawings instantly: "Find all fire-rated doors on level 2 within 50 feet of exits"</p>
                </div>

                <div class="capability-card">
                    <div class="capability-icon" style="background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <h3>Relationship Intelligence</h3>
                    <p>53+ interconnected tables map entire CAD ecosystem: Projects → Drawings → Entities → Layers → Standards</p>
                </div>

                <div class="capability-card">
                    <div class="capability-icon" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>Real-Time Analytics</h3>
                    <p>Drawing stats, layer usage, standards compliance, and export history - all queryable without opening CAD software.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Use Cases -->
    <div class="card">
        <div class="card-header">
            <h2><i class="fas fa-tasks"></i> Real-World Use Cases</h2>
        </div>
        <div class="card-body">
            <div class="use-case">
                <div class="use-case-header">
                    <h3><i class="fas fa-building"></i> Facilities Management</h3>
                </div>
                <p><strong>Challenge:</strong> University needs to find all ADA-compliant restrooms across 200 building floor plans.</p>
                <p><strong>Traditional:</strong> Open 200 DWG files, manually search each one, create spreadsheet (8 hours).</p>
                <p><strong>With Database:</strong> SQL query in 3 seconds: <code>SELECT * FROM block_inserts WHERE block_name='ADA_RESTROOM'</code></p>
            </div>

            <div class="use-case">
                <div class="use-case-header">
                    <h3><i class="fas fa-hard-hat"></i> Construction Document Quality Control</h3>
                </div>
                <p><strong>Challenge:</strong> Ensure all 50 sheets in construction set use company-approved layers and colors.</p>
                <p><strong>Traditional:</strong> QC reviewer manually checks each sheet against 20-page PDF standards manual (4 hours).</p>
                <p><strong>With Database:</strong> Automated query identifies non-compliant layers instantly, generates exception report.</p>
            </div>

            <div class="use-case">
                <div class="use-case-header">
                    <h3><i class="fas fa-map"></i> GIS Asset Inventory</h3>
                </div>
                <p><strong>Challenge:</strong> Create city-wide inventory of fire hydrants from as-built CAD drawings.</p>
                <p><strong>Traditional:</strong> Export each DWG to shapefile separately, merge in GIS software, clean duplicates (days).</p>
                <p><strong>With Database:</strong> CAD blocks already stored as PostGIS points - query directly, overlay with parcels, done.</p>
            </div>
        </div>
    </div>
</div>

<style>
.comparison-section {
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.comparison-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.comparison-section h3 {
    color: var(--accent-cyan);
    font-size: 18px;
    margin: 0 0 15px 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.comparison-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.comparison-list li {
    padding: 12px 12px 12px 40px;
    margin-bottom: 10px;
    border-radius: 6px;
    position: relative;
    line-height: 1.6;
    font-size: 14px;
}

.comparison-list.negative li {
    background: rgba(220, 53, 69, 0.1);
    border-left: 3px solid #dc3545;
    color: var(--text-primary);
}

.comparison-list.negative li:before {
    content: "\f00d";
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    left: 12px;
    color: #ff6b6b;
}

.comparison-list.positive li {
    background: rgba(0, 255, 255, 0.1);
    border-left: 3px solid var(--accent-cyan);
    color: var(--text-primary);
}

.comparison-list.positive li:before {
    content: "\f00c";
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    left: 12px;
    color: var(--accent-cyan);
}

.comparison-list code {
    background: rgba(0,0,0,0.3);
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 12px;
    color: #ffd700;
    font-family: 'Courier New', monospace;
}

.capability-card {
    padding: 25px;
    background: rgba(0,0,0,0.2);
    border-radius: 12px;
    border: 1px solid rgba(0,255,255,0.2);
    transition: transform 0.3s, box-shadow 0.3s;
}

.capability-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,255,255,0.3);
    border-color: var(--accent-cyan);
}

.capability-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 28px;
    color: white;
}

.capability-card h3 {
    color: var(--accent-cyan);
    font-size: 18px;
    margin: 0 0 15px 0;
    text-align: center;
}

.capability-card p {
    color: var(--text-dim);
    font-size: 14px;
    line-height: 1.6;
    margin: 0;
    text-align: center;
}

.use-case {
    padding: 25px;
    margin-bottom: 20px;
    background: linear-gradient(135deg, rgba(0,255,255,0.05) 0%, rgba(0,100,255,0.05) 100%);
    border-left: 4px solid var(--accent-cyan);
    border-radius: 8px;
}

.use-case:last-child {
    margin-bottom: 0;
}

.use-case-header {
    margin-bottom: 15px;
}

.use-case h3 {
    color: var(--accent-cyan);
    font-size: 20px;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.use-case p {
    margin: 10px 0;
    line-height: 1.8;
    color: var(--text-primary);
}

.use-case p strong {
    color: var(--accent-cyan);
}

.use-case code {
    background: rgba(0,0,0,0.4);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 13px;
    color: #ffd700;
    font-family: 'Courier New', monospace;
}

@media (max-width: 1200px) {
    div[style*="grid-template-columns: 1fr 1fr"] {
        grid-template-columns: 1fr !important;
    }
}
</style>
{% endblock %}
